{% extends "base.html" %}
{% block content %}
<section class="row text-center container">
  <div class="container")>
    <div class="row")>
      <div class="col")>
	<canvas id="myChart" width="1000" height="400"></canvas>
	<script>

	  // define the chart data
	  const ctx = document.getElementById('myChart');
	  var chartData = {
		      labels : [{% for item in labels %}
				  "{{item}}",
				  {% endfor %}],
		      datasets : [{
				  label: '{{ legend }}',
				  tension: 0.4,
				  borderColor: 'rgb(75, 192, 192)',
				  fill: false,
				  data : [{% for item in values %}
					      {{item}},
					      {% endfor %}]
				}]
		    }

	  const plot = new Chart(
		      ctx,{
				  type: 'line',
				  data: chartData,
				  options: {
					      scales: {
							  x: {
								      type: 'time',
								      time: {
										  unit: '{{ unit }}',
										  displayFormats: {
											      millisecond: 'HH:mm:ss.SSS',
											      second: 'MMM d h:mm a',
											      minute: 'MMM d h:mm a',
											      hour: 'MMM d, h a',
											      day: 'MMM d'
											    }
										}
								    }
							}
					    }
				});


	</script>
      </div>
    </div>
  </div>
  <div class="container")>
    <form action="" method="post">
      {{ form.hidden_tag() }}
      <div class="container">
	<div class="form-group">
	  <div class="container">
	    <div class="row justify-content-md-center">

	      <div class="col-md-2")>
		{{ form.granularity.label }}:
		{{ form.granularity(class='form-control', placeholder='30min, 1d') }}
		{% for error in form.granularity.errors %}
		<span style="color: red;">[{{ error }}]</span>
		{% endfor %}
	      </div>

	      <div class="col-md-5")>
		{{ form.start_time.label }}:
		{{ form.start_time(type='datetime-local') }}
		{% for error in form.start_time.errors %}
		<span style="color: red;">[{{ error }}]</span>
		{% endfor %}
	      </div>

	      <div class="col-md-5")>
		{{ form.end_time.label }}:
		{{ form.end_time(type='datetime-local') }}
		{% for error in form.end_time.errors %}
		<span style="color: red;">[{{ error }}]</span>
		{% endfor %}
	      </div>

	    </div>
	  </div>
	</div>
	<p>{{ form.submit(class="mt-3") }}</p>
    </form>

      </div>
  </div>
</section>
{% endblock %}
